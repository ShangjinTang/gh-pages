"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7156],{65184:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var s=r(85893),t=r(11151);const i={title:"TensorFlow \u5b98\u65b9\u5165\u95e8\u6559\u7a0b",tags:["Machine Learning","TensorFlow"]},a=void 0,o={id:"machinelearning/tensorflow-1/AI-tensorflow-get-started",title:"TensorFlow \u5b98\u65b9\u5165\u95e8\u6559\u7a0b",description:"\u672c\u6587\u57fa\u4e8e TensorFlow v1.x \u9759\u6001\u56fe\uff0c\u5df2\u7ecf\u8fc7\u65f6\u3002",source:"@site/docs/machinelearning/tensorflow-1/20180203-AI-tensorflow-get-started.md",sourceDirName:"machinelearning/tensorflow-1",slug:"/machinelearning/tensorflow-1/AI-tensorflow-get-started",permalink:"/docusaurus/docs/machinelearning/tensorflow-1/AI-tensorflow-get-started",draft:!1,unlisted:!1,tags:[{label:"Machine Learning",permalink:"/docusaurus/docs/tags/machine-learning"},{label:"TensorFlow",permalink:"/docusaurus/docs/tags/tensor-flow"}],version:"current",sidebarPosition:20180203,frontMatter:{title:"TensorFlow \u5b98\u65b9\u5165\u95e8\u6559\u7a0b",tags:["Machine Learning","TensorFlow"]},sidebar:"machinelearningSidebar",previous:{title:"TensorFlow \u7b80\u4ecb\u53ca\u5b89\u88c5",permalink:"/docusaurus/docs/machinelearning/tensorflow-1/AI-tensorflow-introduction-and-installation"},next:{title:"TensorFlow \u5b98\u65b9\u6559\u7a0b\uff1a\u9762\u5411\u521d\u5b66\u8005\u7684 MNIST",permalink:"/docusaurus/docs/machinelearning/tensorflow-1/AI-tensorflow-mnist-beginners"}},l={},d=[{value:"\u5f20\u91cf",id:"\u5f20\u91cf",level:2},{value:"TensorFlow Core \u6559\u7a0b",id:"tensorflow-core-\u6559\u7a0b",level:2},{value:"\u5bfc\u5165 TensorFlow",id:"\u5bfc\u5165-tensorflow",level:3},{value:"\u8ba1\u7b97\u56fe",id:"\u8ba1\u7b97\u56fe",level:3},{value:"tf.train API",id:"tftrain-api",level:2},{value:"\u5b8c\u6574\u7a0b\u5e8f",id:"\u5b8c\u6574\u7a0b\u5e8f",level:3},{value:"tf.estimator",id:"tfestimator",level:2},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:3},{value:"\u81ea\u5b9a\u4e49\u6a21\u578b",id:"\u81ea\u5b9a\u4e49\u6a21\u578b",level:3}];function c(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.admonition,{type:"danger",children:(0,s.jsx)(e.p,{children:"\u672c\u6587\u57fa\u4e8e TensorFlow v1.x \u9759\u6001\u56fe\uff0c\u5df2\u7ecf\u8fc7\u65f6\u3002"})}),"\n",(0,s.jsxs)(e.p,{children:["\u672c\u6587\u7ffb\u8bd1\u81ea ",(0,s.jsx)(e.a,{href:"https://www.tensorflow.org/get_started/get_started",children:"TensorFlow - Get Started"})," \u5b98\u65b9\u5165\u95e8\u6559\u7a0b\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5f20\u91cf",children:"\u5f20\u91cf"}),"\n",(0,s.jsxs)(e.p,{children:["TensorFlow \u7684\u6838\u5fc3\u5355\u5143\u662f ",(0,s.jsx)(e.strong,{children:"\u5f20\u91cf"}),"\uff08tensor\uff09\u3002\u5f20\u91cf\u662f\u4e00\u4e2a\u591a\u7ef4\u6570\u7ec4\uff0c\u5176\u7ef4\u5ea6\u79f0\u4e3a ",(0,s.jsx)(e.strong,{children:"\u79e9"}),"\uff08rank\uff09\u3002\u4ee5\u4e0b\u662f\u5f20\u91cf\u7684\u4e00\u4e9b\u4f8b\u5b50\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"3 # a rank 0 tensor; this is a scalar with shape []\r\n[1. ,2., 3.] # a rank 1 tensor; this is a vector with shape [3]\r\n[[1., 2., 3.], [4., 5., 6.]] # a rank 2 tensor; a matrix with shape [2, 3]\r\n[[[1., 2., 3.]], [[7., 8., 9.]]] # a rank 3 tensor with shape [2, 1, 3]\n"})}),"\n",(0,s.jsx)(e.h2,{id:"tensorflow-core-\u6559\u7a0b",children:"TensorFlow Core \u6559\u7a0b"}),"\n",(0,s.jsx)(e.h3,{id:"\u5bfc\u5165-tensorflow",children:"\u5bfc\u5165 TensorFlow"}),"\n",(0,s.jsxs)(e.p,{children:["TensorFlow \u7684\u89c4\u8303 ",(0,s.jsx)(e.code,{children:"import"})," \u8bed\u53e5\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"import tensorflow as tf\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4f7f\u7684 Python \u8bbf\u95ee\u6240\u6709 TensorFlow \u7684\u7c7b\uff0c\u65b9\u6cd5\u548c\u7b26\u53f7\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"\u8ba1\u7b97\u56fe",children:"\u8ba1\u7b97\u56fe"}),"\n",(0,s.jsx)(e.p,{children:"TensorFlow \u6838\u5fc3\u65b9\u6848\u4e3a\u7531\u4e24\u4e2a\u72ec\u7acb\u7684\u90e8\u5206\u7ec4\u6210\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u6784\u5efa\u8ba1\u7b97\u56fe\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u8fd0\u884c\u8ba1\u7b97\u56fe\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u8ba1\u7b97\u56fe"}),"\u662f\u4e00\u7cfb\u5217\u5bf9\u8282\u70b9\u56fe\u7684 TensorFlow \u64cd\u4f5c\u3002\u4e0b\u9762\u5efa\u7acb\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u7b97\u56fe\u8868\uff0c\u6bcf\u4e2a\u8282\u70b9\u8f93\u5165\u96f6\u4e2a\u6216\u591a\u4e2a\u5f20\u91cf\uff0c\u5e76\u8f93\u51fa\u4e00\u4e2a\u5f20\u91cf\u3002\u8282\u70b9\u7684\u4e00\u79cd\u7c7b\u578b\u662f",(0,s.jsx)(e.strong,{children:"\u5e38\u91cf"})," ",(0,s.jsx)(e.code,{children:"constant"}),"\uff0c\u4e0d\u9700\u8981\u8f93\u5165\uff0c\u8f93\u51fa\u4e3a\u5185\u90e8\u5b58\u50a8\u7684\u503c\u3002\u521b\u5efa\u4e24\u4e2a\u6d6e\u70b9\u5f20\u91cf ",(0,s.jsx)(e.code,{children:"node1"})," \u548c ",(0,s.jsx)(e.code,{children:"node2"})," \u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"node1 = tf.constant(3.0, tf.float32)\r\nnode2 = tf.constant(4.0) # also tf.float32 implicitly\r\nprint(node1, node2)\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u6700\u540e\u7684 ",(0,s.jsx)(e.code,{children:"print"})," \u6253\u5370\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'Tensor("Const:0", shape=(), dtype=float32) Tensor("Const_1:0", shape=(), dtype=float32)\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u8bf7\u6ce8\u610f\uff0c\u8282\u70b9\u7684\u6253\u5370\u8bed\u53e5\u5e76\u4e0d\u4f1a\u8f93\u51fa\u8282\u70b9\u7684\u503c ",(0,s.jsx)(e.code,{children:"3.0"})," \u548c ",(0,s.jsx)(e.code,{children:"4.0"})," \u3002\u8981\u8ba1\u7b97\u5e76\u8f93\u51fa\u8282\u70b9\u7684\u503c\uff0c\u5fc5\u987b\u8fd0\u884c\u8ba1\u7b97\u56fe\u7684",(0,s.jsx)(e.strong,{children:"\u4f1a\u8bdd"}),"\uff08Session\uff09\u3002\u4f1a\u8bdd\u5c01\u88c5\u4e86 TensorFlow \u8fd0\u884c\u65f6\u7684\u63a7\u5236\u548c\u72b6\u6001\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u4ee5\u4e0b\u4ee3\u7801\u521b\u5efa\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"Session"})," \u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528\u5176 ",(0,s.jsx)(e.code,{children:"run"})," \u65b9\u6cd5\u6765\u901a\u8fc7\u8ba1\u7b97\u56fe\u6765\u5f97\u5230 ",(0,s.jsx)(e.code,{children:"node1"})," \u548c ",(0,s.jsx)(e.code,{children:"node2"})," \u7684\u503c\u3002\u5728\u4f1a\u8bdd\u4e2d\u8fd0\u884c\u8ba1\u7b97\u56fe\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"sess = tf.Session()\r\nprint(sess.run([node1, node2]))\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8f93\u51fa\u7ed3\u679c\u4e3a\u671f\u671b\u8f93\u51fa ",(0,s.jsx)(e.code,{children:"3.0"})," \u548c ",(0,s.jsx)(e.code,{children:"4.0"})," \uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"[3.0, 4.0]\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408\u5f20\u91cf\u7684\u8282\u70b9\u4e0e\u64cd\u4f5c\uff08\u64cd\u4f5c\u4e5f\u5c5e\u4e8e\u8282\u70b9\uff09\u6765\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u8ba1\u7b97\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u6dfb\u52a0\u6211\u4eec\u7684\u4e24\u4e2a\u5e38\u91cf\u8282\u70b9\u5e76\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u56fe\uff0c\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'node3 = tf.add(node1, node2)\r\nprint("node3: ", node3)\r\nprint("sess.run(node3): ",sess.run(node3))\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u6700\u540e\u4e24\u53e5 ",(0,s.jsx)(e.code,{children:"print"})," \u6253\u5370\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python3",children:'node3:  Tensor("Add_2:0", shape=(), dtype=float32)\r\nsess.run(node3):  7.0\n'})}),"\n",(0,s.jsx)(e.p,{children:"TensorFlow \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a TensorBoard \u7684\u5b9e\u7528\u5de5\u5177\uff0c\u53ef\u4ee5\u663e\u793a\u8ba1\u7b97\u56fe\u7684\u56fe\u50cf\u3002\u4e0b\u9762\u662f TensorBoard \u53ef\u89c6\u5316\u754c\u9762\u7684\u622a\u56fe\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://www.tensorflow.org/images/getting_started_add.png",alt:""})}),"\n",(0,s.jsxs)(e.p,{children:["\u4e0a\u9762\u7684\u56fe\u53ea\u80fd\u8f93\u51fa\u5e38\u91cf\uff0c\u5982\u9700\u63a5\u6536\u53d8\u91cf\u5e76\u8f93\u51fa\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,s.jsx)(e.strong,{children:"\u5360\u4f4d\u7b26"})," ",(0,s.jsx)(e.code,{children:"placeholder"}),"\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"a = tf.placeholder(tf.float32)\r\nb = tf.placeholder(tf.float32)\r\nadder_node = a + b  # + provides a shortcut for tf.add(a, b)\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u4e0a\u9762\u4e09\u4e2a\u8bed\u53e5\u6709\u70b9\u7c7b\u4f3c\u4e8e Python \u4e2d\u7684 ",(0,s.jsx)(e.code,{children:"lambda"})," \u51fd\u6570\uff0c\u5bf9\u8f93\u5165\u7684\u53d8\u91cf\uff08a \u548c b\uff09\u8fdb\u884c\u64cd\u4f5c\u3002\u901a\u8fc7\u5411\u5360\u4f4d\u7b26\u4f20\u503c\u6765\u8fdb\u884c\u56fe\u7684\u8ba1\u7b97\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python3",children:"print(sess.run(adder_node, {a: 3, b:4.5}))\r\nprint(sess.run(adder_node, {a: [1,3], b: [2, 4]}))\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u8ff0\u8f93\u51fa\u4e3a\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"7.5\r\n[ 3.  7.]\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728 TensorBoard \u5185\uff0c\u8ba1\u7b97\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://www.tensorflow.org/images/getting_started_adder.png",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"\u6dfb\u52a0\u4ee5\u4e0b\u64cd\u4f5c\u6765\u5f97\u5230\u66f4\u52a0\u590d\u6742\u7684\u8ba1\u7b97\u56fe\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"add_and_triple = adder_node * 3.\r\nprint(sess.run(add_and_triple, {a: 3, b:4.5}))\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u8ff0\u8f93\u51fa\u4e3a\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"22.5\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728 TensorBoard \u5185\uff0c\u8ba1\u7b97\u56fe\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://www.tensorflow.org/images/getting_started_triple.png",alt:""})}),"\n",(0,s.jsxs)(e.p,{children:["\u5728\u673a\u5668\u5b66\u4e60\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u60f3\u8981\u4e00\u4e2a\u53ef\u4ee5\u63a5\u53d7\u4efb\u610f\u8f93\u5165\u7684\u6a21\u578b\u3002\u4e3a\u4e86\u4f7f\u6a21\u578b\u53ef\u8bad\u7ec3\uff0c\u56fe\u5f62\u9700\u8981\u5177\u6709\u53ef\u4fee\u6539\u6027\uff0c\u4f7f\u5f97\u5728\u76f8\u540c\u7684\u8f93\u5165\u4e0b\u6709\u65b0\u7684\u8f93\u51fa\u3002",(0,s.jsx)(e.strong,{children:"\u53d8\u91cf"})," ",(0,s.jsx)(e.code,{children:"Variable"})," \u5141\u8bb8\u6211\u4eec\u5411\u56fe\u4e2d\u6dfb\u52a0\u53ef\u8bad\u7ec3\u7684\u53c2\u6570\uff0c\u5177\u6709\u7c7b\u578b\u548c\u521d\u59cb\u503c\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"W = tf.Variable([.3], tf.float32)\r\nb = tf.Variable([-.3], tf.float32)\r\nx = tf.placeholder(tf.float32)\r\nlinear_model = W * x + b\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8c03\u7528 ",(0,s.jsx)(e.code,{children:"tf.constant"})," \u65f6\uff0c\u5e38\u91cf\u88ab\u521d\u59cb\u5316\uff0c\u5176\u4e2d\u7684\u503c\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\u3002\u76f8\u5bf9\u5730\uff0c\u8c03\u7528 ",(0,s.jsx)(e.code,{children:"tf.Variable"})," \u65f6\u53d8\u91cf\u4e0d\u4f1a\u88ab\u521d\u59cb\u5316\u3002\u8981\u521d\u59cb\u5316 TensorFlow \u7a0b\u5e8f\u4e2d\u7684\u6240\u6709\u53d8\u91cf\uff0c\u5fc5\u987b\u663e\u5f0f\u8c03\u7528\u7279\u6b8a\u7684\u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"init = tf.global_variables_initializer()\r\nsess.run(init)\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"init"})," \u662f TensorFlow \u5b50\u56fe\u521d\u59cb\u5316\u6240\u6709\u7684\u5168\u5c40\u53d8\u91cf\u7684\u53e5\u67c4\u3002\u8fd9\u4e9b\u53d8\u91cf\u5728\u8c03\u7528 ",(0,s.jsx)(e.code,{children:"sess.run"})," \u4e4b\u540e\u624d\u4f1a\u521d\u59cb\u5316\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u7531\u4e8e ",(0,s.jsx)(e.code,{children:"x"})," \u662f\u5360\u4f4d\u7b26\uff0c\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u5bf9 ",(0,s.jsx)(e.code,{children:"linear_model"})," \u8bbe\u7f6e\u591a\u4e2a ",(0,s.jsx)(e.code,{children:"x"})," \u7684\u503c\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"print(sess.run(linear_model, {x:[1,2,3,4]}))\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8f93\u51fa\u4e3a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"[ 0.          0.30000001  0.60000002  0.90000004]\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u4e0a\u9762\u521b\u5efa\u4e86\u4e00\u4e2a\u6a21\u578b\uff0c\u4e3a\u4e86\u8bc4\u4f30\u6a21\u578b\u7684\u8868\u73b0\uff0c\u901a\u8fc7\u5360\u4f4d\u7b26 ",(0,s.jsx)(e.code,{children:"y"})," \u6765\u63d0\u4f9b\u6240\u9700\u7684\u503c\uff0c\u5e76\u4e14\u9700\u8981\u7f16\u5199\u4e00\u4e2a\u635f\u5931\u51fd\u6570\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u635f\u5931\u51fd\u6570\u53ef\u4ee5\u8ba1\u7b97\u51fa\u5f53\u524d\u6a21\u578b\u4e0e\u5b9e\u9645\u6570\u636e\u4e4b\u95f4\u7684\u504f\u5dee\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u7ebf\u6027\u56de\u5f52\u7684\u6807\u51c6\u635f\u5931\u6a21\u578b\uff0c\u5c06\u5f53\u524d\u6a21\u578b\u4e0e\u5b9e\u9645\u6570\u636e\u7684\u5dee\u7684\u5e73\u65b9\u76f8\u52a0\u3002 \u521b\u5efa\u4e00\u4e2a\u5411\u91cf ",(0,s.jsx)(e.code,{children:"linear_model - y"}),"\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u5bf9\u5e94\u7684\u504f\u5dee\u91cf\u3002\u6211\u4eec\u5148\u8c03\u7528 ",(0,s.jsx)(e.code,{children:"tf.square"})," \u6765\u8ba1\u7b97\u504f\u5dee\u91cf\u7684\u5e73\u65b9\uff0c\u7136\u540e\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:"tf.reduce_sum"})," \u6c42\u548c\u8ba1\u7b97\u603b\u7684\u504f\u5dee\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"y = tf.placeholder(tf.float32)\r\nsquared_deltas = tf.square(linear_model - y)\r\nloss = tf.reduce_sum(squared_deltas)\r\nprint(sess.run(loss, {x:[1,2,3,4], y:[0,-1,-2,-3]}))\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5f97\u5230\u635f\u5931\u503c\u4e3a\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"23.66\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u5c06 ",(0,s.jsx)(e.code,{children:"W"})," \u548c ",(0,s.jsx)(e.code,{children:"b"})," \u7684\u503c\u4e3a\u8bbe\u7f6e\u4e3a ",(0,s.jsx)(e.code,{children:"-1"})," \u548c ",(0,s.jsx)(e.code,{children:"1"}),"\uff0c\u5bf9\u6a21\u578b\u8fdb\u884c\u6539\u8fdb\u3002\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:"tf.Variable"})," \u5bf9\u53d8\u91cf\u8fdb\u884c\u521d\u59cb\u5316\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"tf.assign"})," \u7b49\u64cd\u4f5c\u8fdb\u884c\u8d4b\u503c\u3002\u4f8b\u5982\uff0c",(0,s.jsx)(e.code,{children:"W = -1"})," \u548c ",(0,s.jsx)(e.code,{children:"b = 1"})," \u662f\u6211\u4eec\u7684\u6a21\u578b\u7684\u6700\u4f18\u53c2\u6570\u3002\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u8bed\u53e5\u8bbe\u7f6e ",(0,s.jsx)(e.code,{children:"W"})," \u548c ",(0,s.jsx)(e.code,{children:"b"})," \uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"fixW = tf.assign(W, [-1.])\r\nfixb = tf.assign(b, [1.])\r\nsess.run([fixW, fixb])\r\nprint(sess.run(loss, {x:[1,2,3,4], y:[0,-1,-2,-3]}))\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5f97\u5230\u6700\u4f18\u5316\u8f93\u51fa\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"0.0\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u8bbe\u7f6e\u731c\u6d4b ",(0,s.jsx)(e.code,{children:"W"})," \u548c ",(0,s.jsx)(e.code,{children:"b"})," \u7684\u201c\u5b8c\u7f8e\u201d\u503c\uff0c\u4f46\u673a\u5668\u5b66\u4e60\u7684\u91cd\u70b9\u662f\u53ef\u4ee5\u81ea\u52a8\u8bbe\u7f6e\u6b63\u786e\u7684\u6a21\u578b\u53c2\u6570\u3002\u4e0b\u4e00\u8282\u5c06\u5c55\u793a\u5982\u4f55\u5b8c\u6210\u6b64\u9879\u5de5\u4f5c\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"tftrain-api",children:"tf.train API"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u6559\u7a0b\u4e0d\u5bf9\u673a\u5668\u5b66\u4e60\u7684\u8fc7\u7a0b\u8fdb\u884c\u4ecb\u7ecd\uff0c\u5efa\u8bae\u5148\u4fee\u76f8\u5173\u77e5\u8bc6\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["TensorFlow \u63d0\u4f9b\u4e86",(0,s.jsx)(e.strong,{children:"\u4f18\u5316\u5668"}),"\uff08optimizer\uff09\uff0c\u53ef\u4ee5\u7f13\u6162\u5730\u66f4\u6539\u6bcf\u4e2a\u53d8\u91cf\uff0c\u4ece\u800c\u5bf9\u635f\u5931\u51fd\u6570\u8fdb\u884c\u6700\u5c0f\u5316\u3002\u6700\u7b80\u5355\u7684\u4f18\u5316\u5668\u662f",(0,s.jsx)(e.strong,{children:"\u68af\u5ea6\u4e0b\u964d"}),"\uff08gradient descent\uff09\u3002\u68af\u5ea6\u4e0b\u964d\u6839\u636e\u53d8\u91cf\u7684\u635f\u5931\u51fd\u6570\u7684\u5bfc\u6570\uff0c\u5bf9\u6bcf\u4e2a\u53d8\u91cf\u8fdb\u884c\u4fee\u6539\u3002\u5728 TensorFlow \u4e2d\uff0c\u4f18\u5316\u5668\u9ed8\u8ba4\u6267\u884c\u6c42\u5bfc\u548c\u53cd\u5411\u4f20\u64ad\u7b49\u64cd\u4f5c\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"optimizer = tf.train.GradientDescentOptimizer(0.01)\r\ntrain = optimizer.minimize(loss)\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"sess.run(init) # reset values to incorrect defaults.\r\nfor i in range(1000):\r\n  sess.run(train, {x:[1,2,3,4], y:[0,-1,-2,-3]})\r\n  \r\nprint(sess.run([W, b]))\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5f97\u5230\u6700\u7ec8\u7684\u6a21\u578b\u53c2\u6570\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"[array([-0.9999969], dtype=float32), array([ 0.99999082], dtype=float32)]\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u91cc\u901a\u8fc7\u57fa\u672c\u7684 TensorFlow \u6838\u5fc3\u4ee3\u7801\u5b8c\u6210\u4e86\u6700\u7b80\u5355\u7684\u673a\u5668\u5b66\u4e60\u3002\u5982\u9700\u5c06\u590d\u6742\u7684\u6a21\u578b\u548c\u65b9\u6cd5\u5c06\u6570\u636e\u8f93\u5165\u5230\u81ea\u5df1\u7684\u8ba1\u7b97\u6a21\u578b\u4e2d\uff0c\u5219\u9700\u8981\u66f4\u591a\u7684\u4ee3\u7801\u3002\u56e0\u6b64\uff0cTensorFlow \u5bf9\u5e38\u89c1\u7684\u6a21\u5f0f\u3001\u7ed3\u6784\u548c\u51fd\u6570\u63d0\u4f9b\u4e86\u66f4\u9ad8\u7ea7\u522b\u7684\u62bd\u8c61\u3002\u6211\u4eec\u5c06\u5728\u4e0b\u4e00\u8282\u4e2d\u5b66\u4e60\u5982\u4f55\u4f7f\u7528\u5176\u4e2d\u7684\u4e00\u4e9b\u62bd\u8c61\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"\u5b8c\u6574\u7a0b\u5e8f",children:"\u5b8c\u6574\u7a0b\u5e8f"}),"\n",(0,s.jsx)(e.p,{children:"\u5b8c\u6574\u7684\u53ef\u8bad\u7ec3\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'import numpy as np\r\nimport tensorflow as tf\r\n\r\n# Model parameters\r\nW = tf.Variable([.3], tf.float32)\r\nb = tf.Variable([-.3], tf.float32)\r\n# Model input and output\r\nx = tf.placeholder(tf.float32)\r\nlinear_model = W * x + b\r\ny = tf.placeholder(tf.float32)\r\n# loss\r\nloss = tf.reduce_sum(tf.square(linear_model - y)) # sum of the squares\r\n# optimizer\r\noptimizer = tf.train.GradientDescentOptimizer(0.01)\r\ntrain = optimizer.minimize(loss)\r\n# training data\r\nx_train = [1,2,3,4]\r\ny_train = [0,-1,-2,-3]\r\n# training loop\r\ninit = tf.global_variables_initializer()\r\nsess = tf.Session()\r\nsess.run(init) # reset values to wrong\r\nfor i in range(1000):\r\n  sess.run(train, {x:x_train, y:y_train})\r\n\r\n# evaluate training accuracy\r\ncurr_W, curr_b, curr_loss  = sess.run([W, b, loss], {x:x_train, y:y_train})\r\nprint("W: %s b: %s loss: %s"%(curr_W, curr_b, curr_loss))\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd0\u884c\u540e\u8f93\u51fa"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"W: [-0.9999969] b: [ 0.99999082] loss: 5.69997e-11\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e2a\u66f4\u590d\u6742\u7684\u7a0b\u5e8f\u4ecd\u7136\u53ef\u4ee5\u5728 TensorBoard \u4e2d\u53ef\u89c6\u5316\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://www.tensorflow.org/images/getting_started_final.png",alt:""})}),"\n",(0,s.jsx)(e.h2,{id:"tfestimator",children:"tf.estimator"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"tf.estimator"})," \u662f\u4e00\u4e2a\u9ad8\u7ea7 TensorFlow \u5e93\uff0c\u7b80\u5316\u4e86\u673a\u5668\u5b66\u4e60\u7684\u673a\u5236\uff0c\u5305\u62ec\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fd0\u884c\u8bad\u7ec3\u5faa\u73af"}),"\n",(0,s.jsx)(e.li,{children:"\u8fd0\u884c\u8bc4\u4f30\u5faa\u73af"}),"\n",(0,s.jsx)(e.li,{children:"\u7ba1\u7406\u6570\u636e\u96c6"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"tf.estimator"})," \u5b9a\u4e49\u4e86\u8bb8\u591a\u5e38\u89c1\u7684\u6a21\u578b\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u672c\u7528\u6cd5",children:"\u57fa\u672c\u7528\u6cd5"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"tf.estimator"})," \u53ef\u4ee5\u9ad8\u5ea6\u7b80\u5316\u7ebf\u6027\u56de\u5f52\u7a0b\u5e8f\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'# NumPy is often used to load, manipulate and preprocess data.\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n# Declare list of features. We only have one numeric feature. There are many\r\n# other types of columns that are more complicated and useful.\r\nfeature_columns = [tf.feature_column.numeric_column("x", shape=[1])]\r\n\r\n# An estimator is the front end to invoke training (fitting) and evaluation\r\n# (inference). There are many predefined types like linear regression,\r\n# linear classification, and many neural network classifiers and regressors.\r\n# The following code provides an estimator that does linear regression.\r\nestimator = tf.estimator.LinearRegressor(feature_columns=feature_columns)\r\n\r\n# TensorFlow provides many helper methods to read and set up data sets.\r\n# Here we use two data sets: one for training and one for evaluation\r\n# We have to tell the function how many batches\r\n# of data (num_epochs) we want and how big each batch should be.\r\nx_train = np.array([1., 2., 3., 4.])\r\ny_train = np.array([0., -1., -2., -3.])\r\nx_eval = np.array([2., 5., 8., 1.])\r\ny_eval = np.array([-1.01, -4.1, -7, 0.])\r\ninput_fn = tf.estimator.inputs.numpy_input_fn(\r\n    {"x": x_train}, y_train, batch_size=4, num_epochs=None, shuffle=True)\r\ntrain_input_fn = tf.estimator.inputs.numpy_input_fn(\r\n    {"x": x_train}, y_train, batch_size=4, num_epochs=1000, shuffle=False)\r\neval_input_fn = tf.estimator.inputs.numpy_input_fn(\r\n    {"x": x_eval}, y_eval, batch_size=4, num_epochs=1000, shuffle=False)\r\n\r\n# We can invoke 1000 training steps by invoking the  method and passing the\r\n# training data set.\r\nestimator.train(input_fn=input_fn, steps=1000)\r\n\r\n# Here we evaluate how well our model did.\r\ntrain_metrics = estimator.evaluate(input_fn=train_input_fn)\r\neval_metrics = estimator.evaluate(input_fn=eval_input_fn)\r\nprint("train metrics: %r"% train_metrics)\r\nprint("eval metrics: %r"% eval_metrics)\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd0\u884c\u540e\u8f93\u51fa\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"train metrics: {'average_loss': 1.4833182e-08, 'global_step': 1000, 'loss': 5.9332727e-08}\r\neval metrics: {'average_loss': 0.0025353201, 'global_step': 1000, 'loss': 0.01014128}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u867d\u7136\u8bc4\u4f30\u6570\u636e\u96c6\u5177\u6709\u76f8\u5bf9\u66f4\u9ad8\u7684\u635f\u5931\uff0c\u4f46\u8fd9\u4e2a\u635f\u5931\u4ecd\u7136\u63a5\u8fd1\u4e8e\u96f6\uff0c\u610f\u5473\u7740\u5b66\u4e60\u8fc7\u7a0b\u6709\u6548\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"\u81ea\u5b9a\u4e49\u6a21\u578b",children:"\u81ea\u5b9a\u4e49\u6a21\u578b"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"tf.estimator"})," \u4e0d\u8981\u6c42\u4f7f\u7528\u5176\u9884\u5b9a\u4e49\u7684\u6a21\u578b\u3002\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u81ea\u5b9a\u4e49\u6a21\u578b\uff0c\u540c\u65f6\u4ecd\u7136\u53ef\u4ee5\u4fdd\u6301 ",(0,s.jsx)(e.code,{children:"tf.estimator"})," \u7684\u6570\u636e\u96c6\u5408\uff0c\u53cd\u9988\uff0c\u8bad\u7ec3\u7b49\u7684\u9ad8\u7ea7\u62bd\u8c61\u3002\u4e0b\u9762\u5c06\u5c55\u793a\u5982\u4f55\u901a\u8fc7\u4f4e\u7ea7 TensorFlow API \u6765\u5b9e\u73b0\u200b\u200b\u5177\u6709\u76f8\u540c\u529f\u80fd\u7684 ",(0,s.jsx)(e.code,{children:"LinearRegressor"})," \u6a21\u578b\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u8981\u5b9a\u4e49\u4e00\u4e2a\u80fd\u591f\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:"tf.estimator"})," \u5de5\u4f5c\u7684\u81ea\u5b9a\u4e49\u6a21\u578b\uff0c\u9700\u8981\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"tf.estimator.Estimator"}),"\u3002\u4e0a\u8282\u4e2d\u7684 ",(0,s.jsx)(e.code,{children:"tf.estimator.LinearRegressor"})," \u5b9e\u9645\u4e0a\u662f ",(0,s.jsx)(e.code,{children:"tf.estimator.Estimator"})," \u7684\u4e00\u4e2a\u5b50\u7c7b\u3002\u4e3a\u4e86\u5b9e\u73b0\u76f8\u540c\u529f\u80fd\uff0c\u6211\u4eec\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u51fd\u6570 ",(0,s.jsx)(e.code,{children:"model_fn"})," \u6765\u544a\u8bc9 ",(0,s.jsx)(e.code,{children:"tf.estimator"})," \u5982\u4f55\u8ba1\u7b97\u9884\u6d4b\u7ed3\u679c\uff0c\u8bad\u7ec3\u6b65\u9aa4\u548c\u635f\u5931\u3002\u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'import numpy as np\r\nimport tensorflow as tf\r\n\r\n# Declare list of features, we only have one real-valued feature\r\ndef model_fn(features, labels, mode):\r\n  # Build a linear model and predict values\r\n  W = tf.get_variable("W", [1], dtype=tf.float64)\r\n  b = tf.get_variable("b", [1], dtype=tf.float64)\r\n  y = W*features[\'x\'] + b\r\n  # Loss sub-graph\r\n  loss = tf.reduce_sum(tf.square(y - labels))\r\n  # Training sub-graph\r\n  global_step = tf.train.get_global_step()\r\n  optimizer = tf.train.GradientDescentOptimizer(0.01)\r\n  train = tf.group(optimizer.minimize(loss),\r\n                   tf.assign_add(global_step, 1))\r\n  # EstimatorSpec connects subgraphs we built to the\r\n  # appropriate functionality.\r\n  return tf.estimator.EstimatorSpec(\r\n      mode=mode,\r\n      predictions=y,\r\n      loss=loss,\r\n      train_op=train)\r\n\r\nestimator = tf.estimator.Estimator(model_fn=model_fn)\r\n# define our data sets\r\nx_train = np.array([1., 2., 3., 4.])\r\ny_train = np.array([0., -1., -2., -3.])\r\nx_eval = np.array([2., 5., 8., 1.])\r\ny_eval = np.array([-1.01, -4.1, -7., 0.])\r\ninput_fn = tf.estimator.inputs.numpy_input_fn(\r\n    {"x": x_train}, y_train, batch_size=4, num_epochs=None, shuffle=True)\r\ntrain_input_fn = tf.estimator.inputs.numpy_input_fn(\r\n    {"x": x_train}, y_train, batch_size=4, num_epochs=1000, shuffle=False)\r\neval_input_fn = tf.estimator.inputs.numpy_input_fn(\r\n    {"x": x_eval}, y_eval, batch_size=4, num_epochs=1000, shuffle=False)\r\n\r\n# train\r\nestimator.train(input_fn=input_fn, steps=1000)\r\n# Here we evaluate how well our model did.\r\ntrain_metrics = estimator.evaluate(input_fn=train_input_fn)\r\neval_metrics = estimator.evaluate(input_fn=eval_input_fn)\r\nprint("train metrics: %r"% train_metrics)\r\nprint("eval metrics: %r"% eval_metrics)\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd0\u884c\u65f6\u8f93\u51fa\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"train metrics: {'loss': 1.227995e-11, 'global_step': 1000}\r\neval metrics: {'loss': 0.01010036, 'global_step': 1000}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c\u81ea\u5b9a\u4e49\u51fd\u6570 ",(0,s.jsx)(e.code,{children:"model_fn()"})," \u4e0e\u4e4b\u524d\u7684 API \u7ae0\u8282\u7684\u624b\u52a8\u5faa\u73af\u8bad\u7ec3\u8fc7\u7a0b\u975e\u5e38\u7c7b\u4f3c\u3002"]})]})}function h(n={}){const{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},11151:(n,e,r)=>{r.d(e,{Z:()=>o,a:()=>a});var s=r(67294);const t={},i=s.createContext(t);function a(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);