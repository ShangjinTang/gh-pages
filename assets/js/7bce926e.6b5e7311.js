"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2833],{427:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var a=n(5893),t=n(1151);const i={description:"Using MDX plugins to expand Docusaurus Markdown functionalities"},r="MDX Plugins",l={id:"docusaurus-mdx/mdx-features/plugins",title:"MDX Plugins",description:"Using MDX plugins to expand Docusaurus Markdown functionalities",source:"@site/docs/docusaurus-mdx/mdx-features/plugins.mdx",sourceDirName:"docusaurus-mdx/mdx-features",slug:"/docusaurus-mdx/mdx-features/plugins",permalink:"/site/docs/docusaurus-mdx/mdx-features/plugins",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{description:"Using MDX plugins to expand Docusaurus Markdown functionalities"},sidebar:"docusaurusSidebar",previous:{title:"Markdown links",permalink:"/site/docs/docusaurus-mdx/mdx-features/links"},next:{title:"Math Equations",permalink:"/site/docs/docusaurus-mdx/mdx-features/math-equations"}},c={},h=[{value:"Default plugins",id:"default-plugins",level:2},{value:"Installing plugins",id:"installing-plugins",level:2}];function o(e){const s={a:"a",admonition:"admonition",annotation:"annotation",code:"code",h1:"h1",h2:"h2",li:"li",math:"math",mrow:"mrow",mtext:"mtext",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,t.a)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{id:"mdx-plugins",children:"MDX Plugins"}),"\n",(0,a.jsx)(s.p,{children:"Sometimes, you may want to extend or tweak your Markdown syntax. For example:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["How do I embed youtube videos using the image syntax (",(0,a.jsx)(s.code,{children:"![](https://youtu.be/yKNxeF4KMsY)"}),")?"]}),"\n",(0,a.jsx)(s.li,{children:"How do I style links that are on their own lines differently, e.g., as a social card?"}),"\n",(0,a.jsx)(s.li,{children:"How do I make every page start with a copyright notice?"}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["And the answer is: create an MDX plugin! MDX has a built-in ",(0,a.jsx)(s.a,{href:"https://mdxjs.com/advanced/plugins/",children:"plugin system"})," that can be used to customize how the Markdown files will be parsed and transformed to JSX. There are three typical use-cases of MDX plugins:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Using existing ",(0,a.jsx)(s.a,{href:"https://github.com/remarkjs/remark/blob/main/doc/plugins.md#list-of-plugins",children:"remark plugins"})," or ",(0,a.jsx)(s.a,{href:"https://github.com/rehypejs/rehype/blob/main/doc/plugins.md#list-of-plugins",children:"rehype plugins"}),";"]}),"\n",(0,a.jsx)(s.li,{children:"Creating remark/rehype plugins to transform the elements generated by existing MDX syntax;"}),"\n",(0,a.jsx)(s.li,{children:"Creating remark/rehype plugins to introduce new syntaxes to MDX."}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["If you play with the ",(0,a.jsx)(s.a,{href:"https://mdxjs.com/playground/",children:"MDX playground"}),", you would notice that the MDX transpilation has two intermediate steps: Markdown AST (MDAST), and Hypertext AST (HAST), before arriving at the final JSX output. MDX plugins also come in two forms:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.a,{href:"https://github.com/remarkjs/remark/",children:"Remark"})}),": processes the Markdown AST."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.a,{href:"https://github.com/rehypejs/rehype/",children:"Rehype"})}),": processes the Hypertext AST."]}),"\n"]}),"\n",(0,a.jsx)(s.admonition,{type:"tip",children:(0,a.jsx)(s.p,{children:"Use plugins to introduce shorter syntax for the most commonly used JSX elements in your project. The admonition syntax that we offer is also generated by a Remark plugin, and you could do the same for your own use case."})}),"\n",(0,a.jsx)(s.h2,{id:"default-plugins",children:"Default plugins"}),"\n",(0,a.jsxs)(s.p,{children:["Docusaurus injects ",(0,a.jsx)(s.a,{href:"https://github.com/facebook/docusaurus/tree/main/packages/docusaurus-mdx-loader/src/remark",children:"some default Remark plugins"})," during Markdown processing. These plugins would:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Generate the table of contents;"}),"\n",(0,a.jsx)(s.li,{children:"Add anchor links to each heading;"}),"\n",(0,a.jsxs)(s.li,{children:["Transform images and links to ",(0,a.jsx)(s.code,{children:"require()"})," calls."]}),"\n",(0,a.jsx)(s.li,{children:"\u2026\nThese are all typical use-cases of Remark plugins, which can also be a source of inspiration if you want to implement your own plugin."}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"installing-plugins",children:"Installing plugins"}),"\n",(0,a.jsx)(s.p,{children:"An MDX plugin is usually an npm package, so you install them like other npm packages using npm. Take the math plugins as an example."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",metastring:"npm2yarn",children:"npm install --save remark-math@6 rehype-katex@7\n"})}),"\n",(0,a.jsxs)(n,{children:[(0,a.jsxs)("summary",{children:["How are ",(0,a.jsx)("code",{children:"remark-math"})," and ",(0,a.jsx)("code",{children:"rehype-katex"})," different?"]}),(0,a.jsxs)(s.p,{children:["In case you are wondering how Remark and Rehype are different, here is a good example. ",(0,a.jsx)(s.code,{children:"remark-math"})," operates on the Markdown AST, where it sees text like ",(0,a.jsx)(s.code,{children:"$...$"}),", and all it does is transform that to the JSX ",(0,a.jsx)(s.code,{children:'<span class="math math-inline">...</span>'})," without doing too much with the content. This decouples the extraction of math formulae from their rendering, which means you can swap ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mtext,{children:"KaTeX"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\KaTeX"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8988em",verticalAlign:"-0.2155em"}}),(0,a.jsxs)(s.span,{className:"mord text",children:[(0,a.jsx)(s.span,{className:"mord textrm",children:"K"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.17em"}}),(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.6833em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.905em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord textrm mtight sizing reset-size6 size3",children:"A"})})]})})})}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord text",children:[(0,a.jsx)(s.span,{className:"mord textrm",children:"T"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.1667em"}}),(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.4678em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.7845em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord textrm",children:"E"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2155em"},children:(0,a.jsx)(s.span,{})})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.125em"}}),(0,a.jsx)(s.span,{className:"mord textrm",children:"X"})]})]})]})})]})," out with other math renderers, like MathJax (with ",(0,a.jsx)(s.a,{href:"https://github.com/remarkjs/remark-math/tree/main/packages/rehype-mathjax",children:(0,a.jsx)(s.code,{children:"rehype-mathjax"})}),"), just by replacing the Rehype plugin."]}),(0,a.jsxs)(s.p,{children:["Next, the ",(0,a.jsx)(s.code,{children:"rehype-katex"})," operates on the Hypertext AST where everything has been converted to HTML-like tags already. It traverses all the elements with ",(0,a.jsx)(s.code,{children:"math"})," class and uses ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mtext,{children:"KaTeX"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\KaTeX"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8988em",verticalAlign:"-0.2155em"}}),(0,a.jsxs)(s.span,{className:"mord text",children:[(0,a.jsx)(s.span,{className:"mord textrm",children:"K"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.17em"}}),(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.6833em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.905em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord textrm mtight sizing reset-size6 size3",children:"A"})})]})})})}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord text",children:[(0,a.jsx)(s.span,{className:"mord textrm",children:"T"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.1667em"}}),(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.4678em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.7845em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord textrm",children:"E"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2155em"},children:(0,a.jsx)(s.span,{})})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"-0.125em"}}),(0,a.jsx)(s.span,{className:"mord textrm",children:"X"})]})]})]})})]})," to parse and render the content to actual HTML."]})]}),"\n",(0,a.jsx)(s.admonition,{type:"warning",children:(0,a.jsxs)(s.p,{children:["Many official Remark/Rehype plugins are ",(0,a.jsx)(s.a,{href:"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c",children:(0,a.jsx)(s.strong,{children:"ES Modules only"})}),", a JavaScript module system, which Docusaurus supports. We recommend using an ",(0,a.jsx)(s.a,{href:"https://flaviocopes.com/es-modules/",children:(0,a.jsx)(s.strong,{children:"ES Modules"})})," config file to make it easier to import such packages."]})}),"\n",(0,a.jsxs)(s.p,{children:["Next, import your plugins and add them to the plugin options through plugin or preset config in ",(0,a.jsx)(s.code,{children:"docusaurus.config.ts"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-ts",metastring:'title="docusaurus.config.ts"',children:"// highlight-start\nimport remarkMath from 'remark-math';\nimport rehypeKatex from 'rehype-katex';\n// highlight-end\n\n// highlight-start\nexport default {\n  presets: [\n    [\n      '@docusaurus/preset-classic',\n      {\n        docs: {\n          path: 'docs',\n          // highlight-start\n          remarkPlugins: [remarkMath],\n          rehypePlugins: [rehypeKatex],\n          // highlight-end\n        },\n      },\n    ],\n  ],\n};\n"})})]})}function d(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>r});var a=n(7294);const t={},i=a.createContext(t);function r(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);